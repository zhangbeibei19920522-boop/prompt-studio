<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prompt Manager - UI é¢„è§ˆ</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        border: 'hsl(220 13% 91%)',
        input: 'hsl(220 13% 91%)',
        ring: 'hsl(224 71.4% 4.1%)',
        background: 'hsl(0 0% 100%)',
        foreground: 'hsl(224 71.4% 4.1%)',
        primary: { DEFAULT: 'hsl(220.9 39.3% 11%)', foreground: 'hsl(210 20% 98%)' },
        secondary: { DEFAULT: 'hsl(220 14.3% 95.9%)', foreground: 'hsl(220.9 39.3% 11%)' },
        destructive: { DEFAULT: 'hsl(0 84.2% 60.2%)', foreground: 'hsl(210 20% 98%)' },
        muted: { DEFAULT: 'hsl(220 14.3% 95.9%)', foreground: 'hsl(220 8.9% 46.1%)' },
        accent: { DEFAULT: 'hsl(220 14.3% 95.9%)', foreground: 'hsl(220.9 39.3% 11%)' },
        popover: { DEFAULT: 'hsl(0 0% 100%)', foreground: 'hsl(224 71.4% 4.1%)' },
        card: { DEFAULT: 'hsl(0 0% 100%)', foreground: 'hsl(224 71.4% 4.1%)' },
      }
    }
  }
}
</script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: system-ui, -apple-system, sans-serif; }
  .badge { display: inline-flex; align-items: center; border-radius: 9999px; padding: 1px 8px; font-size: 11px; font-weight: 500; line-height: 1.6; }
  .badge-default { background: hsl(220.9 39.3% 11%); color: hsl(210 20% 98%); }
  .badge-secondary { background: hsl(220 14.3% 95.9%); color: hsl(220.9 39.3% 11%); }
  .badge-outline { border: 1px solid hsl(220 13% 91%); color: hsl(220 8.9% 46.1%); }
  .ref-tag-prompt { background: #eff6ff; color: #1d4ed8; border: 1px solid #bfdbfe; border-radius: 6px; padding: 2px 6px; font-size: 12px; display: inline-flex; align-items: center; gap: 4px; }
  .ref-tag-doc { background: #f0fdf4; color: #15803d; border: 1px solid #bbf7d0; border-radius: 6px; padding: 2px 6px; font-size: 12px; display: inline-flex; align-items: center; gap: 4px; }
  .diff-add { background: #dcfce7; color: #166534; padding: 2px 8px; }
  .diff-remove { background: #fee2e2; color: #991b1b; padding: 2px 8px; text-decoration: line-through; }
  .diff-context { color: #6b7280; padding: 2px 8px; }
  .tab-active { border-bottom: 2px solid hsl(220.9 39.3% 11%); color: hsl(220.9 39.3% 11%); font-weight: 500; }
  .tab-inactive { border-bottom: 2px solid transparent; color: hsl(220 8.9% 46.1%); }
  pre { font-family: 'SF Mono', 'Cascadia Code', 'Consolas', monospace; }
  .highlight-var { color: #2563eb; background: #eff6ff; padding: 0 2px; border-radius: 3px; }
  /* Animate */
  .panel-open { width: 400px; opacity: 1; transition: all 0.3s ease; }
  .panel-closed { width: 0; opacity: 0; overflow: hidden; transition: all 0.3s ease; }
  /* Tooltip for interactive demo */
  .tooltip-hint { position: fixed; top: 16px; left: 50%; transform: translateX(-50%); background: #1e293b; color: white; padding: 8px 16px; border-radius: 8px; font-size: 13px; z-index: 100; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
  .btn { display: inline-flex; align-items: center; justify-content: center; border-radius: 6px; font-size: 13px; font-weight: 500; padding: 6px 12px; cursor: pointer; transition: all 0.15s; border: none; }
  .btn-primary { background: hsl(220.9 39.3% 11%); color: white; }
  .btn-primary:hover { background: hsl(220.9 39.3% 18%); }
  .btn-outline { background: white; border: 1px solid hsl(220 13% 91%); color: hsl(220.9 39.3% 11%); }
  .btn-outline:hover { background: hsl(220 14.3% 95.9%); }
  .btn-ghost { background: transparent; color: hsl(220 8.9% 46.1%); }
  .btn-ghost:hover { background: hsl(220 14.3% 95.9%); color: hsl(220.9 39.3% 11%); }
  .btn-destructive { background: hsl(0 84.2% 60.2%); color: white; }
  .input-field { height: 36px; width: 100%; border-radius: 6px; border: 1px solid hsl(220 13% 91%); padding: 0 12px; font-size: 14px; outline: none; }
  .input-field:focus { border-color: hsl(224 71.4% 4.1%); box-shadow: 0 0 0 2px hsl(224 71.4% 4.1% / 10%); }
  .textarea-field { width: 100%; border-radius: 6px; border: 1px solid hsl(220 13% 91%); padding: 8px 12px; font-size: 14px; outline: none; resize: none; }
  .textarea-field:focus { border-color: hsl(224 71.4% 4.1%); box-shadow: 0 0 0 2px hsl(224 71.4% 4.1% / 10%); }
</style>
</head>
<body class="h-screen flex flex-col bg-background text-foreground">

<!-- Tooltip -->
<div class="tooltip-hint" id="hint">
  ç‚¹å‡»å·¦ä¾§ Prompt æˆ–çŸ¥è¯†åº“é¡¹ç›®æŸ¥çœ‹å³ä¾§é¢æ¿ | ç‚¹å‡»ä¸‹æ–¹æ ‡ç­¾åˆ‡æ¢è§†å›¾
</div>

<!-- Top Bar -->
<header class="flex h-14 items-center justify-between border-b bg-white px-4 shrink-0">
  <div class="flex items-center gap-2">
    <button class="btn btn-outline gap-1" style="min-width:140px; justify-content: space-between;">
      <span>å®¢æœæœºå™¨äºº</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
    </button>
    <button class="btn btn-ghost gap-1">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      æ–°å»ºé¡¹ç›®
    </button>
  </div>
  <button class="btn btn-ghost gap-1">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
    å…¨å±€è®¾ç½®
  </button>
</header>

<!-- Main Content -->
<div class="flex flex-1 overflow-hidden">

  <!-- Left Sidebar -->
  <aside class="flex h-full w-60 shrink-0 flex-col border-r bg-white">
    <!-- Sessions -->
    <div class="flex flex-col">
      <div class="flex items-center justify-between px-3 py-2">
        <div class="flex items-center gap-1.5 text-sm font-medium">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22z"/></svg>
          <span>å¯¹è¯</span>
        </div>
        <button class="btn btn-ghost p-1" style="width:24px;height:24px;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
        </button>
      </div>
      <div class="flex flex-col gap-0.5 px-2 pb-2 overflow-auto" style="max-height:180px;">
        <button class="flex w-full flex-col items-start rounded-md px-2 py-1.5 text-left bg-accent" onclick="switchSession('s1')">
          <span class="w-full truncate text-sm">ä¼˜åŒ–æ¬¢è¿è¯­å¤šè¯­è¨€æ”¯æŒ</span>
          <span class="text-xs text-muted-foreground">2 å°æ—¶å‰</span>
        </button>
        <button class="flex w-full flex-col items-start rounded-md px-2 py-1.5 text-left hover:bg-accent" onclick="switchSession('s2')">
          <span class="w-full truncate text-sm">æ–°å¢å”®åå›å¤ Prompt</span>
          <span class="text-xs text-muted-foreground">5 å°æ—¶å‰</span>
        </button>
      </div>
    </div>

    <div class="border-t my-1"></div>

    <!-- Project Resources -->
    <div class="flex flex-1 flex-col overflow-hidden">
      <p class="px-3 py-2 text-xs font-medium text-muted-foreground">é¡¹ç›®èµ„æº</p>
      <div class="flex-1 overflow-auto px-1">
        <!-- Prompts -->
        <div>
          <button class="flex w-full items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground" onclick="toggleGroup('prompts')">
            <svg id="prompts-chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
            <span>ğŸ“‹ Prompt</span>
            <span class="ml-auto">(3)</span>
          </button>
          <div id="prompts-group">
            <button class="flex w-full items-center gap-2 px-6 py-1 text-left hover:bg-accent rounded-sm" onclick="showPromptPreview('welcome')">
              <span class="flex-1 truncate text-xs">æ¬¢è¿è¯­ Prompt</span>
              <span class="badge badge-default">å¯ç”¨</span>
            </button>
            <button class="flex w-full items-center gap-2 px-6 py-1 text-left hover:bg-accent rounded-sm" onclick="showPromptPreview('classify')">
              <span class="flex-1 truncate text-xs">é—®é¢˜åˆ†ç±» Prompt</span>
              <span class="badge badge-default">å¯ç”¨</span>
            </button>
            <button class="flex w-full items-center gap-2 px-6 py-1 text-left hover:bg-accent rounded-sm" onclick="showPromptPreview('reply')">
              <span class="flex-1 truncate text-xs">å›å¤ç”Ÿæˆ Prompt</span>
              <span class="badge badge-default">å¯ç”¨</span>
            </button>
          </div>
        </div>

        <!-- Documents -->
        <div class="mt-1">
          <button class="flex w-full items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground" onclick="toggleGroup('docs')">
            <svg id="docs-chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
            <span>ğŸ“ çŸ¥è¯†åº“</span>
            <span class="ml-auto">(2)</span>
          </button>
          <div id="docs-group">
            <button class="flex w-full items-center gap-2 px-6 py-1 text-left hover:bg-accent rounded-sm" onclick="showDocPreview('manual')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>
              <span class="flex-1 truncate text-xs">äº§å“æ‰‹å†Œ.pdf</span>
            </button>
            <button class="flex w-full items-center gap-2 px-6 py-1 text-left hover:bg-accent rounded-sm" onclick="showDocPreview('faq')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>
              <span class="flex-1 truncate text-xs">FAQ æ–‡æ¡£.md</span>
            </button>
          </div>
        </div>

        <!-- Settings -->
        <button class="flex w-full items-center gap-1.5 px-3 py-1.5 mt-1 text-xs font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-sm" onclick="showProjectSettings()">
          <span>âš™ é¡¹ç›®è®¾ç½®</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Chat Area (Center) -->
  <main class="flex flex-1 flex-col overflow-hidden" id="chat-area">
    <!-- Messages -->
    <div class="flex-1 overflow-auto p-4" id="messages-container">
      <div class="flex flex-col gap-4 max-w-3xl mx-auto">

        <!-- User message 1 -->
        <div class="flex w-full justify-end">
          <div class="max-w-[80%]">
            <div class="flex flex-wrap gap-1 mb-1 justify-end">
              <span class="ref-tag-prompt">ğŸ“‹ æ¬¢è¿è¯­ Prompt</span>
              <span class="ref-tag-doc">ğŸ“ äº§å“æ‰‹å†Œ.pdf</span>
            </div>
            <div class="rounded-lg px-3 py-2 text-sm leading-relaxed bg-primary text-white">
              <p>è¯·å¸®æˆ‘ä¼˜åŒ–æ¬¢è¿è¯­ promptï¼Œå¢åŠ å¤šè¯­è¨€æ”¯æŒï¼Œèƒ½æ ¹æ®ç”¨æˆ·çš„è¯­è¨€è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
            </div>
            <p class="text-[10px] text-muted-foreground mt-1 text-right">10:00</p>
          </div>
        </div>

        <!-- Agent message with plan card -->
        <div class="flex w-full justify-start">
          <div class="max-w-[80%] space-y-2">
            <div class="rounded-lg px-3 py-2 text-sm leading-relaxed bg-muted">
              <p>å¥½çš„ï¼Œæˆ‘å·²ç»åˆ†æäº†æ‚¨çš„éœ€æ±‚ã€‚æ ¹æ®å½“å‰çš„ä¸šåŠ¡è¯´æ˜å’Œæ¬¢è¿è¯­ Prompt çš„å†…å®¹ï¼Œæˆ‘åˆ¶å®šäº†ä»¥ä¸‹ä¿®æ”¹è§„åˆ’ï¼š</p>
            </div>
            <!-- Plan Card -->
            <div class="rounded-lg border bg-card p-4 space-y-3">
              <div class="flex items-center gap-2 text-sm font-medium">
                <span style="color:#3b82f6;">ğŸ“‹</span>
                <span>ä¿®æ”¹è§„åˆ’</span>
                <span class="text-xs text-green-600 bg-green-50 px-1.5 py-0.5 rounded">å·²ç¡®è®¤</span>
              </div>
              <p class="text-xs text-muted-foreground">æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘æ‹†åˆ†ä¸ºä»¥ä¸‹å…³é”®ç‚¹ï¼š</p>
              <div class="space-y-2">
                <div class="flex items-start gap-2 w-full text-left rounded-md p-2 bg-muted/30">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="#3b82f6" stroke="#3b82f6" stroke-width="0" class="mt-0.5 shrink-0"><rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2" fill="none"/><path d="m9 12 2 2 4-4" stroke-width="2" fill="none"/></svg>
                  <div>
                    <p class="text-sm">1. ä¿®æ”¹ã€Œæ¬¢è¿è¯­ Promptã€</p>
                    <p class="text-xs text-muted-foreground mt-0.5">â†’ å¢åŠ è¯­è¨€æ£€æµ‹å’Œå¤šè¯­è¨€æ”¯æŒé€»è¾‘</p>
                  </div>
                </div>
                <div class="flex items-start gap-2 w-full text-left rounded-md p-2 bg-muted/30">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="#3b82f6" stroke="#3b82f6" stroke-width="0" class="mt-0.5 shrink-0"><rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2" fill="none"/><path d="m9 12 2 2 4-4" stroke-width="2" fill="none"/></svg>
                  <div>
                    <p class="text-sm">2. æ–°å»ºã€Œè¯­è¨€æ£€æµ‹ Promptã€</p>
                    <p class="text-xs text-muted-foreground mt-0.5">â†’ è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·è¯­è¨€</p>
                  </div>
                </div>
              </div>
            </div>
            <p class="text-[10px] text-muted-foreground mt-1">10:01</p>
          </div>
        </div>

        <!-- User confirm -->
        <div class="flex w-full justify-end">
          <div class="max-w-[80%]">
            <div class="rounded-lg px-3 py-2 text-sm leading-relaxed bg-primary text-white">
              <p>è§„åˆ’çœ‹èµ·æ¥ä¸é”™ï¼Œè¯·å¼€å§‹æ‰§è¡Œã€‚</p>
            </div>
            <p class="text-[10px] text-muted-foreground mt-1 text-right">10:02</p>
          </div>
        </div>

        <!-- Agent message with Diff card -->
        <div class="flex w-full justify-start">
          <div class="max-w-[80%] space-y-2">
            <div class="rounded-lg px-3 py-2 text-sm leading-relaxed bg-muted">
              <p>å·²å®Œæˆä¿®æ”¹ï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹å˜æ›´ï¼š</p>
            </div>
            <!-- Diff Card -->
            <div class="rounded-lg border bg-card p-4 space-y-3">
              <div class="flex items-center gap-2 text-sm font-medium">
                <span style="color:#f97316;">âœï¸</span>
                <span>ä¿®æ”¹ Promptï¼šæ¬¢è¿è¯­ Prompt</span>
              </div>
              <div class="rounded-md bg-muted overflow-hidden">
                <div class="p-3 space-y-0 text-xs leading-relaxed" style="font-family: 'SF Mono', 'Consolas', monospace;">
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”µå•†å®¢æœåŠ©æ‰‹ã€‚</div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>å½“ç”¨æˆ·é¦–æ¬¡è¿›å…¥å¯¹è¯æ—¶ï¼Œè¯·ç”¨çƒ­æƒ…å‹å¥½çš„è¯­æ°”æ‰“æ‹›å‘¼ã€‚</div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span></div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>è¦æ±‚ï¼š</div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>1. è‡ªæˆ‘ä»‹ç»</div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>2. è¯¢é—®ç”¨æˆ·éœ€è¦ä»€ä¹ˆå¸®åŠ©</div>
                  <div class="diff-remove"><span class="mr-2 inline-block w-4 text-right select-none">-</span>3. ä½¿ç”¨{{è¯­è¨€}}å›å¤</div>
                  <div class="diff-add"><span class="mr-2 inline-block w-4 text-right select-none">+</span>3. æ ¹æ®ç”¨æˆ·çš„è¯­è¨€è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨å¯¹åº”è¯­è¨€å›å¤</div>
                  <div class="diff-add"><span class="mr-2 inline-block w-4 text-right select-none">+</span>4. æ”¯æŒçš„è¯­è¨€ï¼šä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡</div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span></div>
                  <div class="diff-context"><span class="mr-2 inline-block w-4 text-right select-none"> </span>æ³¨æ„ï¼šä¿æŒç®€æ´ï¼Œä¸è¶…è¿‡3å¥è¯ã€‚</div>
                </div>
              </div>
              <div class="flex gap-2 pt-1">
                <button class="btn btn-primary">åº”ç”¨ä¿®æ”¹</button>
                <button class="btn btn-outline">åœ¨å³ä¾§ç¼–è¾‘</button>
                <button class="btn btn-ghost">æ‹’ç»</button>
              </div>
            </div>

            <!-- Preview Card (new prompt) -->
            <div class="rounded-lg border bg-card p-4 space-y-3 mt-3">
              <div class="flex items-center gap-2 text-sm font-medium">
                <span style="color:#eab308;">âœ¨</span>
                <span>æ–°å»º Promptï¼šè¯­è¨€æ£€æµ‹ Prompt</span>
              </div>
              <div class="rounded-md bg-muted p-3">
                <pre class="text-sm whitespace-pre-wrap break-words leading-relaxed">ä½ æ˜¯ä¸€ä¸ªè¯­è¨€æ£€æµ‹åŠ©æ‰‹ã€‚åˆ†æç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ï¼Œåˆ¤æ–­å…¶ä½¿ç”¨çš„è¯­è¨€ã€‚

è¾“å‡ºæ ¼å¼ï¼š
{"language": "è¯­è¨€åç§°", "code": "ISO 639-1 ä»£ç ", "confidence": 0.95}

æ”¯æŒçš„è¯­è¨€ï¼š
- ä¸­æ–‡ (zh)
- English (en)
- æ—¥æœ¬èª (ja)
- í•œêµ­ì–´ (ko)

æ³¨æ„ï¼š
1. å¦‚æœæ— æ³•ç¡®å®šè¯­è¨€ï¼Œé»˜è®¤è¿”å›ä¸­æ–‡
2. confidence ä½äº 0.7 æ—¶ï¼Œé»˜è®¤è¿”å›ä¸­æ–‡</pre>
              </div>
              <div class="flex gap-1 flex-wrap">
                <span class="text-xs bg-secondary px-1.5 py-0.5 rounded">å®¢æœ</span>
                <span class="text-xs bg-secondary px-1.5 py-0.5 rounded">è¯­è¨€æ£€æµ‹</span>
              </div>
              <div class="flex gap-2 pt-1">
                <button class="btn btn-primary">åº”ç”¨ä¿å­˜</button>
                <button class="btn btn-outline">åœ¨å³ä¾§ç¼–è¾‘</button>
                <button class="btn btn-ghost">æ‹’ç»</button>
              </div>
            </div>
            <p class="text-[10px] text-muted-foreground mt-1">10:03</p>
          </div>
        </div>

      </div>
    </div>

    <!-- Chat Input -->
    <div class="border-t bg-white p-4">
      <div class="max-w-3xl mx-auto">
        <div class="relative flex items-end gap-2">
          <textarea
            class="textarea-field"
            rows="2"
            placeholder="è¾“å…¥éœ€æ±‚æè¿°ï¼Œä½¿ç”¨ @ å¼•ç”¨ Prompt æˆ–çŸ¥è¯†åº“..."
            style="min-height:44px; max-height:160px;"
          ></textarea>
          <button class="btn btn-primary shrink-0" style="width:36px;height:36px;padding:0;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>
          </button>
        </div>
        <p class="text-[10px] text-muted-foreground mt-1">Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œï¼Œ@ å¼•ç”¨</p>
      </div>
    </div>
  </main>

  <!-- Right Panel -->
  <div class="flex flex-col border-l bg-white shrink-0 panel-closed" id="right-panel">
    <div class="flex h-14 items-center justify-between border-b px-4 shrink-0">
      <span class="text-sm font-semibold truncate" id="panel-title">Prompt é¢„è§ˆ</span>
      <button class="btn btn-ghost p-1" style="width:28px;height:28px;" onclick="closePanel()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
      </button>
    </div>
    <div class="flex-1 overflow-auto p-4" id="panel-content">
      <!-- Dynamic content -->
    </div>
  </div>

</div>

<!-- View switcher tabs (for demo) -->
<div class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50 flex justify-center gap-1 p-2" id="view-tabs">
  <button class="btn btn-primary text-xs" onclick="showView('chat')">å¯¹è¯ç•Œé¢</button>
  <button class="btn btn-outline text-xs" onclick="showView('settings')">å…¨å±€è®¾ç½®</button>
  <button class="btn btn-outline text-xs" onclick="showView('project-settings')">é¡¹ç›®è®¾ç½®</button>
  <button class="btn btn-outline text-xs" onclick="showView('create-project')">æ–°å»ºé¡¹ç›®</button>
</div>

<!-- Settings View (hidden by default) -->
<div class="fixed inset-0 bg-background z-40 overflow-auto hidden" id="settings-view">
  <div class="max-w-2xl mx-auto p-8">
    <button class="btn btn-ghost mb-4" onclick="showView('chat')">â† è¿”å›</button>
    <h1 class="text-xl font-bold mb-6">å…¨å±€è®¾ç½®</h1>

    <!-- AI Config Card -->
    <div class="rounded-lg border bg-card p-6 mb-6">
      <h2 class="text-base font-semibold mb-4">AI æ¨¡å‹é…ç½®</h2>
      <div class="space-y-4">
        <div>
          <label class="text-sm font-medium block mb-1">æ¨¡å‹æä¾›å•†</label>
          <select class="input-field" style="appearance:auto;">
            <option>OpenAI</option>
            <option>Claude</option>
            <option>Kimi (æœˆä¹‹æš—é¢)</option>
            <option>GLM (æ™ºè°±AI)</option>
            <option selected>DeepSeek</option>
            <option>é€šä¹‰åƒé—®</option>
            <option>å…¶ä»–</option>
          </select>
        </div>
        <div>
          <label class="text-sm font-medium block mb-1">API Key</label>
          <input type="password" class="input-field" value="sk-xxxxxxxxxxxxxxxx" />
        </div>
        <div>
          <label class="text-sm font-medium block mb-1">æ¨¡å‹åç§°</label>
          <input class="input-field" value="deepseek-chat" />
        </div>
        <div>
          <label class="text-sm font-medium block mb-1">Base URL</label>
          <input class="input-field" value="https://api.deepseek.com/v1" />
          <p class="text-xs text-muted-foreground mt-1">DeepSeek é»˜è®¤: https://api.deepseek.com/v1</p>
        </div>
        <button class="btn btn-primary">ä¿å­˜æ¨¡å‹é…ç½®</button>
      </div>
    </div>

    <!-- Global Business Info Card -->
    <div class="rounded-lg border bg-card p-6">
      <h2 class="text-base font-semibold mb-4">å…¨å±€ä¸šåŠ¡ä¿¡æ¯</h2>
      <div class="space-y-4">
        <div>
          <label class="text-sm font-medium block mb-1">å…¨å±€ä¸šåŠ¡è¯´æ˜</label>
          <textarea class="textarea-field" rows="3" placeholder="é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®çš„é€šç”¨è§„åˆ™...">æ‰€æœ‰ prompt å¿…é¡»ä½¿ç”¨ç¤¼è²Œç”¨è¯­ã€‚é¿å…ç”Ÿæˆä¸å½“å†…å®¹ã€‚</textarea>
        </div>
        <div>
          <label class="text-sm font-medium block mb-1">å…¨å±€ä¸šåŠ¡ç›®æ ‡</label>
          <textarea class="textarea-field" rows="3" placeholder="ç»„ç»‡å±‚é¢çš„ prompt ä½¿ç”¨ç›®æ ‡...">æå‡ AI åº”ç”¨çš„è´¨é‡å’Œä¸€è‡´æ€§ï¼Œé™ä½äººå·¥ç»´æŠ¤æˆæœ¬ã€‚</textarea>
        </div>
        <div>
          <label class="text-sm font-medium block mb-1">å…¨å±€ä¸šåŠ¡èƒŒæ™¯</label>
          <textarea class="textarea-field" rows="3" placeholder="æ•´ä½“ä¸šåŠ¡èƒŒæ™¯...">å…¬å¸ä½¿ç”¨å¤šä¸ª AI é©±åŠ¨çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç† promptã€‚</textarea>
        </div>
        <button class="btn btn-primary">ä¿å­˜ä¸šåŠ¡ä¿¡æ¯</button>
      </div>
    </div>
  </div>
</div>

<!-- Project Settings View (hidden) -->
<div class="fixed inset-0 bg-background z-40 overflow-auto hidden" id="project-settings-view">
  <div class="max-w-2xl mx-auto p-8">
    <button class="btn btn-ghost mb-4" onclick="showView('chat')">â† è¿”å›</button>
    <h1 class="text-xl font-bold mb-6">é¡¹ç›®è®¾ç½® â€” å®¢æœæœºå™¨äºº</h1>

    <div class="rounded-lg border bg-card p-6 mb-4">
      <h2 class="text-base font-semibold mb-4">åŸºæœ¬ä¿¡æ¯</h2>
      <div class="space-y-3">
        <div><label class="text-sm font-medium block mb-1">é¡¹ç›®åç§°</label><input class="input-field" value="å®¢æœæœºå™¨äºº" /></div>
        <div><label class="text-sm font-medium block mb-1">é¡¹ç›®ç®€ä»‹</label><textarea class="textarea-field" rows="2">æ™ºèƒ½å®¢æœç³»ç»Ÿçš„ Prompt ç®¡ç†</textarea></div>
        <button class="btn btn-primary">ä¿å­˜</button>
      </div>
    </div>

    <div class="rounded-lg border bg-card p-6 mb-4">
      <h2 class="text-base font-semibold mb-4">ä¸šåŠ¡è¯´æ˜</h2>
      <textarea class="textarea-field" rows="4">é¢å‘ç”µå•†å¹³å°çš„æ™ºèƒ½å®¢æœç³»ç»Ÿã€‚å¼ºåˆ¶è§„åˆ™ï¼š1. æ‰€æœ‰å›å¤å¿…é¡»åŒ…å«ç¤¼è²Œç”¨è¯­ 2. æ¶‰åŠé€€æ¬¾é—®é¢˜å¿…é¡»å¼•å¯¼è‡³äººå·¥å®¢æœ</textarea>
      <p class="text-xs text-muted-foreground mt-1">æç¤ºï¼šåœ¨æ­¤æ ‡è®°éœ€è¦å¼ºåˆ¶å†™å…¥ prompt çš„è§„åˆ™</p>
      <button class="btn btn-primary mt-3">ä¿å­˜</button>
    </div>

    <div class="rounded-lg border bg-card p-6 mb-4">
      <h2 class="text-base font-semibold mb-4">ä¸šåŠ¡ç›®æ ‡</h2>
      <textarea class="textarea-field" rows="3">æå‡å®¢æœå›å¤è´¨é‡å’Œæ•ˆç‡ï¼Œé™ä½äººå·¥å®¢æœå·¥ä½œé‡</textarea>
      <button class="btn btn-primary mt-3">ä¿å­˜</button>
    </div>

    <div class="rounded-lg border bg-card p-6 mb-4">
      <h2 class="text-base font-semibold mb-4">ä¸šåŠ¡èƒŒæ™¯</h2>
      <textarea class="textarea-field" rows="3">å½“å‰å®¢æœç³»ç»Ÿä½¿ç”¨ GPT-4o å¤„ç†ç”¨æˆ·å’¨è¯¢ï¼Œprompt åˆ†å¸ƒåœ¨æ¬¢è¿è¯­ã€é—®é¢˜åˆ†ç±»ã€å›å¤ç”Ÿæˆä¸‰ä¸ªç¯èŠ‚</textarea>
      <button class="btn btn-primary mt-3">ä¿å­˜</button>
    </div>

    <div class="border-t pt-4 mt-4">
      <p class="text-sm font-medium text-destructive mb-2">å±é™©æ“ä½œ</p>
      <button class="btn btn-destructive">åˆ é™¤é¡¹ç›®</button>
    </div>
  </div>
</div>

<!-- Create Project Dialog (hidden) -->
<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden" id="create-project-view" onclick="if(event.target===this)showView('chat')">
  <div class="bg-white rounded-lg shadow-xl w-full max-w-lg p-6 mx-4" onclick="event.stopPropagation()">
    <h2 class="text-lg font-semibold mb-1">æ–°å»ºé¡¹ç›®</h2>
    <p class="text-sm text-muted-foreground mb-4">åˆ›å»ºä¸€ä¸ªæ–°çš„ Prompt ç®¡ç†é¡¹ç›®</p>
    <div class="space-y-4">
      <div><label class="text-sm font-medium block mb-1">é¡¹ç›®åç§° <span class="text-destructive">*</span></label><input class="input-field" placeholder="è¾“å…¥é¡¹ç›®åç§°" /></div>
      <div><label class="text-sm font-medium block mb-1">é¡¹ç›®ç®€ä»‹</label><textarea class="textarea-field" rows="2" placeholder="ç®€è¦æè¿°é¡¹ç›®ç”¨é€”"></textarea></div>
      <div><label class="text-sm font-medium block mb-1">ä¸šåŠ¡è¯´æ˜</label><textarea class="textarea-field" rows="3" placeholder="åŒ…å«éœ€è¦å¼ºåˆ¶å†™å…¥ prompt çš„è§„åˆ™..."></textarea></div>
      <div><label class="text-sm font-medium block mb-1">ä¸šåŠ¡ç›®æ ‡</label><textarea class="textarea-field" rows="2" placeholder="è¯¥é¡¹ç›®çš„ prompt è¦è§£å†³ä»€ä¹ˆé—®é¢˜..."></textarea></div>
      <div><label class="text-sm font-medium block mb-1">ä¸šåŠ¡èƒŒæ™¯</label><textarea class="textarea-field" rows="2" placeholder="prompt åœ¨è¯¥é¡¹ç›®ä¸­æ˜¯æ€ä¹ˆåº”ç”¨çš„..."></textarea></div>
      <div class="flex justify-end gap-2 pt-2">
        <button class="btn btn-outline" onclick="showView('chat')">å–æ¶ˆ</button>
        <button class="btn btn-primary">åˆ›å»ºé¡¹ç›®</button>
      </div>
    </div>
  </div>
</div>

<script>
// Panel content templates
const promptData = {
  welcome: {
    title: 'æ¬¢è¿è¯­ Prompt',
    status: 'å¯ç”¨',
    tags: ['å®¢æœ', 'æ¬¢è¿è¯­'],
    version: 2,
    content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”µå•†å®¢æœåŠ©æ‰‹ã€‚å½“ç”¨æˆ·é¦–æ¬¡è¿›å…¥å¯¹è¯æ—¶ï¼Œè¯·ç”¨çƒ­æƒ…å‹å¥½çš„è¯­æ°”æ‰“æ‹›å‘¼ã€‚\n\nè¦æ±‚ï¼š\n1. è‡ªæˆ‘ä»‹ç»\n2. è¯¢é—®ç”¨æˆ·éœ€è¦ä»€ä¹ˆå¸®åŠ©\n3. ä½¿ç”¨<span class="highlight-var">{{è¯­è¨€}}</span>å›å¤\n\næ³¨æ„ï¼šä¿æŒç®€æ´ï¼Œä¸è¶…è¿‡3å¥è¯ã€‚',
    description: 'ç”¨äºå®¢æœæœºå™¨äººçš„æ¬¢è¿è¯­ç”Ÿæˆ',
    variables: [{ name: 'è¯­è¨€', desc: 'å›å¤è¯­è¨€', default: 'ä¸­æ–‡' }]
  },
  classify: {
    title: 'é—®é¢˜åˆ†ç±» Prompt',
    status: 'å¯ç”¨',
    tags: ['å®¢æœ', 'åˆ†ç±»'],
    version: 1,
    content: 'ä½ æ˜¯ä¸€ä¸ªé—®é¢˜åˆ†ç±»åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·çš„é—®é¢˜åˆ†ç±»åˆ°ä»¥ä¸‹ç±»åˆ«ä¹‹ä¸€ï¼š\n\n- å•†å“å’¨è¯¢\n- è®¢å•æŸ¥è¯¢\n- é€€æ¢è´§\n- æŠ•è¯‰å»ºè®®\n- å…¶ä»–\n\nè¾“å‡ºæ ¼å¼ï¼š{"category": "ç±»åˆ«å", "confidence": 0.95}',
    description: 'å¯¹ç”¨æˆ·é—®é¢˜è¿›è¡Œè‡ªåŠ¨åˆ†ç±»',
    variables: []
  },
  reply: {
    title: 'å›å¤ç”Ÿæˆ Prompt',
    status: 'å¯ç”¨',
    tags: ['å®¢æœ', 'å›å¤'],
    version: 3,
    content: 'ä½ æ˜¯<span class="highlight-var">{{å“ç‰Œå}}</span>çš„å®¢æœä»£è¡¨ã€‚æ ¹æ®ä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆå›å¤ï¼š\n\nç”¨æˆ·é—®é¢˜ï¼š<span class="highlight-var">{{ç”¨æˆ·é—®é¢˜}}</span>\né—®é¢˜ç±»åˆ«ï¼š<span class="highlight-var">{{é—®é¢˜ç±»åˆ«}}</span>\n\nè¦æ±‚ï¼š\n1. ä¿æŒç¤¼è²Œä¸“ä¸š\n2. ç›´æ¥å›ç­”é—®é¢˜\n3. å¦‚æ¶‰åŠé€€æ¬¾ï¼Œå¼•å¯¼è‡³äººå·¥å®¢æœ',
    description: 'æ ¹æ®åˆ†ç±»ç»“æœç”Ÿæˆæœ€ç»ˆå›å¤',
    variables: [{ name: 'å“ç‰Œå', desc: 'å“ç‰Œåç§°' }, { name: 'ç”¨æˆ·é—®é¢˜', desc: 'ç”¨æˆ·åŸå§‹é—®é¢˜' }, { name: 'é—®é¢˜ç±»åˆ«', desc: 'åˆ†ç±»ç»“æœ' }]
  }
};

const docData = {
  manual: { name: 'äº§å“æ‰‹å†Œ.pdf', type: 'PDF', content: 'ç¬¬ä¸€ç«  äº§å“æ¦‚è¿°\n\næœ¬äº§å“æ˜¯ä¸€ä¸ªé¢å‘ç”µå•†å¹³å°çš„æ™ºèƒ½å®¢æœç³»ç»Ÿ...\n\nç¬¬äºŒç«  åŠŸèƒ½è¯´æ˜\n\n2.1 è‡ªåŠ¨å›å¤\nè‡ªåŠ¨å›å¤åŠŸèƒ½æ”¯æŒä»¥ä¸‹åœºæ™¯ï¼š\n- å•†å“å’¨è¯¢\n- è®¢å•çŠ¶æ€æŸ¥è¯¢\n- é€€æ¢è´§æµç¨‹\n...' },
  faq: { name: 'FAQ æ–‡æ¡£.md', type: 'MD', content: '# å¸¸è§é—®é¢˜\n\n## Q1: å¦‚ä½•é€€è´§ï¼Ÿ\nåœ¨è®¢å•è¯¦æƒ…é¡µç‚¹å‡»"ç”³è¯·é€€è´§"ï¼Œå¡«å†™é€€è´§åŸå› åæäº¤ã€‚\n\n## Q2: é€€æ¬¾å¤šä¹…åˆ°è´¦ï¼Ÿ\nä¸€èˆ¬ 3-5 ä¸ªå·¥ä½œæ—¥å†…åˆ°è´¦ã€‚\n\n## Q3: å¦‚ä½•ä¿®æ”¹æ”¶è´§åœ°å€ï¼Ÿ\nåœ¨è®¢å•æœªå‘è´§å‰ï¼Œå¯åœ¨è®¢å•è¯¦æƒ…é¡µä¿®æ”¹åœ°å€ã€‚' }
};

function openPanel(title, html) {
  document.getElementById('panel-title').textContent = title;
  document.getElementById('panel-content').innerHTML = html;
  document.getElementById('right-panel').className = 'flex flex-col border-l bg-white shrink-0 panel-open';
}

function closePanel() {
  document.getElementById('right-panel').className = 'flex flex-col border-l bg-white shrink-0 panel-closed';
}

function showPromptPreview(key) {
  const p = promptData[key];
  const varsHtml = p.variables.length > 0
    ? '<div class="mt-4"><p class="text-xs text-muted-foreground mb-2">å˜é‡</p>' +
      p.variables.map(v => `<div class="flex items-center gap-2 mb-1"><span class="highlight-var text-xs">{{${v.name}}}</span><span class="text-xs text-muted-foreground">${v.desc}${v.default ? ' (é»˜è®¤: ' + v.default + ')' : ''}</span></div>`).join('') +
      '</div>'
    : '';
  const tagsHtml = p.tags.map(t => `<span class="badge badge-outline">${t}</span>`).join(' ');

  openPanel(p.title, `
    <div class="space-y-4">
      <div class="flex items-center gap-2">
        <span class="badge badge-default">${p.status}</span>
        ${tagsHtml}
      </div>
      <div>
        <p class="text-xs text-muted-foreground mb-1">å†…å®¹</p>
        <pre class="text-sm whitespace-pre-wrap bg-muted p-3 rounded-md leading-relaxed">${p.content}</pre>
      </div>
      <div>
        <p class="text-xs text-muted-foreground mb-1">è¡¥å……è¯´æ˜</p>
        <p class="text-sm">${p.description}</p>
      </div>
      ${varsHtml}
      <div class="flex items-center gap-4 text-xs text-muted-foreground">
        <span>ç‰ˆæœ¬ v${p.version}</span>
        <span>æœ€åä¿®æ”¹ 2026-02-28</span>
      </div>
      <div class="flex gap-2 pt-2">
        <button class="btn btn-primary text-xs">ç¼–è¾‘</button>
        <button class="btn btn-outline text-xs">å¤åˆ¶å†…å®¹</button>
        <button class="btn btn-ghost text-xs">æŸ¥çœ‹å†å²</button>
      </div>
    </div>
  `);
}

function showDocPreview(key) {
  const d = docData[key];
  openPanel(d.name, `
    <div class="space-y-4">
      <div class="flex items-center gap-2">
        <span class="badge badge-secondary">${d.type}</span>
        <span class="text-xs text-muted-foreground">ä¸Šä¼ äº 2026-02-28</span>
      </div>
      <div>
        <p class="text-xs text-muted-foreground mb-1">æ–‡æ¡£å†…å®¹</p>
        <pre class="text-sm whitespace-pre-wrap bg-muted p-3 rounded-md leading-relaxed">${d.content}</pre>
      </div>
      <button class="btn btn-destructive text-xs">åˆ é™¤æ–‡æ¡£</button>
    </div>
  `);
}

function showProjectSettings() {
  showView('project-settings');
}

function toggleGroup(id) {
  const el = document.getElementById(id + '-group');
  el.style.display = el.style.display === 'none' ? 'block' : 'none';
}

function showView(view) {
  document.getElementById('settings-view').classList.add('hidden');
  document.getElementById('project-settings-view').classList.add('hidden');
  document.getElementById('create-project-view').classList.add('hidden');

  if (view === 'settings') document.getElementById('settings-view').classList.remove('hidden');
  if (view === 'project-settings') document.getElementById('project-settings-view').classList.remove('hidden');
  if (view === 'create-project') document.getElementById('create-project-view').classList.remove('hidden');
}

function switchSession(id) {
  // Demo only - just visual feedback
}

// Auto-hide hint after 5s
setTimeout(() => { document.getElementById('hint').style.opacity = '0'; document.getElementById('hint').style.transition = 'opacity 1s'; }, 5000);
setTimeout(() => { document.getElementById('hint').style.display = 'none'; }, 6000);
</script>

</body>
</html>
